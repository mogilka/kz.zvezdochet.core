package kz.zvezdochet.core.test;

/**
 * Текстовые утилиты
 * @author Natalie Didenko
 */
public class StringTest {

	public StringTest() {}

	/**
	 * @param args
	 */
	public static void main(String[] args) {
		emoji();
		//split();
	}

	/**
	 * Разбиение длинного текста на порции
	 */
	private static void split() {
//		String text = "<p>Восприятие у человека не быстрое, а глубокое и иррациональное. Он проявляет повышенное внимание к своему фундаменту, глубинным энергиям: «Из чего я сделан? Что является моей основой?» Это некая своеобразная личная религиозность — то, во что он сам в себе верит; его личный Бог, которого он просит помочь в трудную минуту, тем самым оживляя свои потенциальные, только ему известные и чувствуемые возможности.</p>\n" + 
//		" \n" + 
//		"<p>Лунные фазы управляют его настроением, определяя спады и подъёмы. Он может быть постоянен в чувствах, но не в эмоциях, потому что переменчивая Луна делает его то любезным и откровенным (когда он чувствует себя защищённым), то меланхоличным, замкнутым, сдержанным и подозрительным (когда не уверен в себе и не хочет показывать свои истинные порывы). Но в целом производит спокойное, кроткое впечатление, даже если иногда показывает свой характер. Отличается верностью, мягкостью и доброжелательностью, т.к. понимает, что жизнь — сложная штука, и не надо её ещё больше усложнять.</p>\n" + 
//		"\n" + 
//		"<p>При контакте с людьми проявляет высокую чувствительность, восприимчив к их настроению, остро реагирует на чужое мнение и влияние, многое принимает на свой счёт — даже то, что не надо (привык искать в себе слабости, обороняться против критики). По натуре очень эмоционален, — этим и объясняется медлительность его реакций и действий — сильными, яркими эмоциями, сложными душевными переживаниями, богатой и мучительной внутренней жизнью. На подсознательном уровне эмоции всегда пpеобладают над разумом.</p>\n" + 
//		"\n" + 
//		"<p>Себя воспринимает очень серьёзно — как личность, с которой следует считаться. Внутреннее «Я» для него — нечто драгоценное, и он оберегает свою душу, держит её под надёжной бронёй. Защищаясь от душевных травм, часто ищет спасения в одиночестве и размышлениях. Конфликтов избегает, т.к. тяжело их переносит, особенно если кроме себя не на кого положиться. Будучи кем-то обиженным, ведёт себя безрассудно, теряет способность сотрудничать. Иногда кажется, что он обладает необъятной душевной силой, но порой становится скрытен и беспомощен, как ребёнок. Ради своей безопасности идёт на всё, душевных и физических травм избегает любыми средствами, хотя способен вынести любые передряги. Иногда слишком замыкается в себе, что ведёт к унынию и депрессии. Но из критических ситуаций выбирается самостоятельно, бесконечно копаясь в себе, ища источник внутренних сил, жалея себя и оберегая неокрепшие эмоции от окружающих.</p>\n" + 
//		"\n" + 
//		"<p>Его мысли, чувства и мотивы поведения трудно разгадать, поэтому часто его не понимают даже близкие люди; хотя сам он их видит насквозь. Часто надевает маску, которая им приятна, и таких масок может быть сколько угодно; сколько нужно – столько и будет. Зачем он это делает? Физически и психологически он очень раним; не любит, когда его обижают и высмеивают, и маска служит своеобразной защитой от стороннего вторжения в его внутренний мир. Он готов быть кем угодно, лишь бы обеспечить себе безопасность. Но взятая на себя роль редко соответствует его внутренней сущности. Никто, кроме него самого, не знает истинных мотивов его поступков. И никакой другой знак Зодиака не проявляет такую показную добродетель, верность, чувственность и оскорблённость.</p>\n" + 
//		"\n" + 
//		"<p>Свою обострённую интуицию, доходящую иногда до мистицизма, он тоже может тщательно скрывать, чтобы не выделяться из толпы.</p>\n" + 
//		"\n" + 
//		"<p>В общем, от природы вы хороший психолог: происходящее видите ясно и отчётливо, всецело доверяете своим чувствам и реакциям. Но когда в дело вмешиваются эмоции, сразу сбиваетесь с пути. Чтобы избежать лишних переживаний и драматичных обстоятельств, укрепляйте своё внутреннее «Я». В критические моменты жизни общайтесь с людьми, способными вывести вас из состояния уныния.</p>\n" + 
//		"\n" + 
//		"<p>Вы стремитесь быть понятым и любимым, а также понимать и любить других, но последнего достигнете только в случае объективного подхода к окружающим, – без этого не добиться счастья и успеха. Меньше циклитесь на своих эмоциях, пробудите в себе сострадание, проявите искренний интерес к людям, добейтесь их понимания, действуя так, чтобы они отнеслись к вам с одобрением. Направьте свою интуицию на моральную помощь нуждающимся, на творческую работу в бизнесе, науке и искусстве. Стремление пользоваться всеми возможностями мира, преображаться, доказывать и проявлять любовь заменит вашу глубинную склонность довольствоваться тем, что есть. Повернитесь к миру лицом, и перед вами откроются все двери. Но этого не произойдёт, если ваш взгляд будет по-прежнему обращён внутрь себя.</p>";
//
//	Matcher m = Pattern.compile("(?=(</p>))").matcher(text);
//	List<Integer> pos = new ArrayList<Integer>();
//	while (m.find()) 
//	    pos.add(m.start());
//	System.out.println(pos); //[410, 997, 1506, 2427, 3187, 3318, 3698, 4483]
//
//	int LIMIT = 2300;
//	List<Integer> pos2 = new ArrayList<Integer>();
//	for (int i = 0; i < pos.size(); i++) {
//		int p = pos.get(i);
//		int l = pos2.isEmpty() ? LIMIT : LIMIT + pos2.get(pos2.size() - 1);
//		if (p >= l)
//			if (i > 0)
//				pos2.add(pos.get(i - 1));
//	}
//	pos2.add(text.length());
//	System.out.println(pos2); //[1506, 3698]
//
//	List<String> parts = new ArrayList<String>();
//	int steps = pos2.size();
//	for (int i = 0; i < steps; i++) {
//		int beginIndex = (0 == i) ? 0 : pos2.get(i - 1) + 4;
//		int endIndex = pos2.get(i) + 4;
//		parts.add(i == steps - 1
//			? text.substring(beginIndex)
//			: text.substring(beginIndex, endIndex));
//	}
//	System.out.println(parts);

		String res = "гармония, ";
		int margin = res.length() - 2;
		int pos = res.indexOf(", ", margin);
		if (pos == margin)
			res = res.substring(0, margin);
		System.out.println(res);		
	}

	/**
	 * Удаление смайлов
	 * @link https://stackoverflow.com/questions/49510006/remove-and-other-such-emojis-images-signs-from-java-strings
	 */
	private static void emoji() {
		String characterFilter = "[^\\p{L}\\p{M}\\p{N}\\p{P}\\p{Z}\\p{Cf}\\p{Cs}\\s]";
		/*
		 * is a range representing all numeric (\\p{N}),
		 * letter (\\p{L}) specifically includes the characters from other alphabets such as Cyrillic, Latin, Kanji, etc.,
		 * mark (\\p{M}),
		 * punctuation (\\p{P}),
		 * whitespace/separator (\\p{Z}),
		 * other formatting (\\p{Cf})
		 * other characters above U+FFFF in Unicode (\\p{Cs}),
		 * newline (\\s) characters. \\p{L}
		 * The ^ in the regex character set negates the match.
		 */

		String str = "hello world _# 皆さん、こんにちは！　私はジョンと申します。🔥";
		System.out.println(str.replaceAll(characterFilter, ""));

		str = "❗️Британская газета Guardian назвала пять возможных сценариев развития ситуации на Украине 1️⃣ Согласно одному из возможных сценариев, конфликт \"вероятно, продлится как минимум год\", при этом \"по существу зайдет в тупик\", а его интенсивность будет снижаться";
		System.out.println(str.replaceAll(characterFilter, ""));
	}
}
